graph TD
    A["ğŸ“± Google Ads API"] --> B["Data Collection<br/>Layer"]
    C["ğŸ“± Meta Ads API"] --> B
    D["ğŸ“± Naver Ads API"] --> B
    E["Mock API<br/>FastAPI"] -.->|Dev Only| B

    B --> F["GCS<br/>Raw Storage<br/>gs://bucket/raw/{channel}/yyyy/mm/dd"]
    F --> G["Data Processing<br/>Layer"]

    G --> H["Staging<br/>Schema Normalization<br/>ì •ê·œí™”"]
    H --> I["Metrics<br/>Calculation<br/>CTR, CPC, CPA, ROAS, CVR"]
    I --> J["BigQuery<br/>Data Warehouse"]

    J --> K["raw_data<br/>ì›ë³¸"]
    J --> L["staging_data<br/>ì •ê·œí™”"]
    J --> M["metrics<br/>ê³„ì‚° ì§€í‘œ â­<br/>ë§ˆìŠ¤í„° í…Œì´ë¸”"]

    M --> N["Looker Studio<br/>Dashboard<br/>ìë™ ë¦¬í”„ë ˆì‹œ 04:00"]

    O["Apache Airflow<br/>Orchestration<br/>ë§¤ì¼ 3ì‹œ ì‹¤í–‰"] -.->|Controls & Monitors| B
    O -.->|Controls & Monitors| G
    O -.->|Controls & Monitors| J

    N --> P["ğŸ“Š 5 Charts<br/>â€¢ ROAS ì¶”ì´<br/>â€¢ ìº í˜ì¸ë³„ ì§€í‘œ<br/>â€¢ Top/Bottom 5<br/>â€¢ ê´‘ê³ ë¹„ ë¶„ë°°<br/>â€¢ ì „í™˜ìœ¨ ì¶”ì´"]

    Q["ğŸ”” Slack/Email<br/>Notifications"] -.->|on_failure| O

    style A fill:#4285F4,color:#fff
    style C fill:#1877F2,color:#fff
    style D fill:#2EC15F,color:#fff
    style B fill:#FFA500,color:#fff
    style F fill:#4285F4,color:#fff
    style G fill:#FF6B6B,color:#fff
    style H fill:#FF6B6B,color:#fff
    style I fill:#FF6B6B,color:#fff
    style J fill:#9C27B0,color:#fff
    style K fill:#E1BEE7,color:#000
    style L fill:#E1BEE7,color:#000
    style M fill:#FFD700,color:#000
    style N fill:#34A853,color:#fff
    style O fill:#FF6B9D,color:#fff
    style P fill:#C8E6C9,color:#000
    style Q fill:#FF6B6B,color:#fff
